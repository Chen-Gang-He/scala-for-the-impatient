<!DOCTYPE html>

<html>
<head>
  <title>Scala For The Impatient -- Chapter 8</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="index.html">
                  index
                </a>
              
                
                <a class="source" href="chapter1.html">
                  chapter1
                </a>
              
                
                <a class="source" href="chapter2.html">
                  chapter2
                </a>
              
                
                <a class="source" href="chapter3.html">
                  chapter3
                </a>
              
                
                <a class="source" href="chapter4.html">
                  chapter4
                </a>
              
                
                <a class="source" href="chapter5.html">
                  chapter5
                </a>
              
                
                <a class="source" href="chapter6.html">
                  chapter6
                </a>
              
                
                <a class="source" href="chapter7.html">
                  chapter7
                </a>
              
                
                <a class="source" href="chapter8.html">
                  chapter8
                </a>
              
                
                <a class="source" href="chapter9.html">
                  chapter9
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    
    
        <a class="home" href="index.html">⏎</a>
    

    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="scala-for-the-impatient-chapter-8">Scala For The Impatient – Chapter 8</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="exercise-1">Exercise 1</h2>
<blockquote>
<p>Extend the following BankAccount class to a CheckingAccount class that charges $1 for every deposit and withdrawal.</p>
</blockquote>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Here, we just added a <code>balance</code> method to get the current balance as well as a proper <code>toString</code> method definition.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BankAccount</span>(<span class="hljs-params">initialBalance: <span class="hljs-type">Double</span></span>) </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _balance = initialBalance

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deposit</span></span>(amount: <span class="hljs-type">Double</span>) = {
    _balance += amount
    _balance
  }

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">withdraw</span></span>(amount: <span class="hljs-type">Double</span>) = {
    _balance -= amount
    _balance
  }

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">balance</span></span>() = _balance

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">toString</span></span>: <span class="hljs-type">String</span> = <span class="hljs-string">s"Account{balance = <span class="hljs-subst">${_balance}</span>}"</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CheckingAccount</span>(<span class="hljs-params">initialBalance: <span class="hljs-type">Double</span>, val charges: <span class="hljs-type">Double</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">BankAccount</span>(<span class="hljs-params">initialBalance</span>) </span>{

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deposit</span></span>(amount: <span class="hljs-type">Double</span>): <span class="hljs-type">Double</span> = {
    <span class="hljs-keyword">super</span>.deposit(amount - charges)
  }

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">withdraw</span></span>(amount: <span class="hljs-type">Double</span>): <span class="hljs-type">Double</span> = {
    <span class="hljs-keyword">super</span>.withdraw(amount + charges)
  }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2 id="exercise-2">Exercise 2</h2>
<blockquote>
<p>Extend the BankAccount class of the preceding exercise into a class SavingsAccount that earns interest every month (when a method earnMonthlyInterest is called) and has three free deposits or withdrawals every month. Reset the transaction count in the earnMonthlyInterest method.</p>
</blockquote>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>parameters:</p>
<ul>
<li><code>initialBalance</code>: the balance to begin with</li>
<li><code>charges</code>: amount charged for each non-free transaction</li>
<li><code>interest</code>: monthly interest rate (in percentage, between 0 and 1)</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SavingsAccount</span>(<span class="hljs-params">initialBalance: <span class="hljs-type">Double</span>, charges: <span class="hljs-type">Double</span>, val interest: <span class="hljs-type">Double</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">BankAccount</span>(<span class="hljs-params">initialBalance</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Ensure interest is a percentage</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  require(interest &gt;= <span class="hljs-number">0</span> &amp;&amp; interest &lt;= <span class="hljs-number">1</span>)

  <span class="hljs-keyword">val</span> maxFreeActions = <span class="hljs-number">3</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>don’t let other modify the actions counter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">private</span>[<span class="hljs-keyword">this</span>] <span class="hljs-keyword">var</span> actionsInMonth = <span class="hljs-number">0</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">earnMonthlyInterest</span></span>() = {
    actionsInMonth = <span class="hljs-number">0</span>
    <span class="hljs-keyword">super</span>.deposit(balance * interest)
  }

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deposit</span></span>(amount: <span class="hljs-type">Double</span>): <span class="hljs-type">Double</span> = {
    actionsInMonth += <span class="hljs-number">1</span>
    <span class="hljs-keyword">super</span>.deposit(amount - (<span class="hljs-keyword">if</span> (actionsInMonth &gt; maxFreeActions) charges <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>))
  }

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">withdraw</span></span>(amount: <span class="hljs-type">Double</span>): <span class="hljs-type">Double</span> = {
    actionsInMonth += <span class="hljs-number">1</span>
    <span class="hljs-keyword">super</span>.withdraw(amount + (<span class="hljs-keyword">if</span> (actionsInMonth &gt; maxFreeActions) charges <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>))
  }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Create an account with a 10% interest rate, 5$ of charges and 100$ as initial balance.
Then, play a bit with it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">val</span> account = <span class="hljs-keyword">new</span> <span class="hljs-type">SavingsAccount</span>(<span class="hljs-number">100</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0.1</span>) <span class="hljs-comment">//&gt; balance = 100</span>
account.deposit(<span class="hljs-number">10</span>) <span class="hljs-comment">//&gt; balance = 110</span>
account.deposit(<span class="hljs-number">10</span>) <span class="hljs-comment">//&gt; balance = 120</span>
account.withdraw(<span class="hljs-number">20</span>) <span class="hljs-comment">//&gt; balance = 100</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Here, we should have 100$ again. The actions are now charged.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>account.withdraw(<span class="hljs-number">5</span>) <span class="hljs-comment">//&gt; balance = 90</span>
account.deposit(<span class="hljs-number">15</span>) <span class="hljs-comment">//&gt; balance = 100</span>
account.earnMonthlyInterest()</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <blockquote>
<p>balance = 110</p>
</blockquote>

            </div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h2 id="exercise-3">Exercise 3</h2>
<blockquote>
<p>Consult your favorite Java or C++ textbook that is sure to have an example of a toy inheritance hierarchy, perhaps involving employees, pets, graphical shapes, or the like. Implement the example in Scala.</p>
</blockquote>
<pre><code>        +----------+
        |    os    |
        +----------+
          |      |
 +--------v-+  +-v--------+
 | windows  |  |   unix   |
 +----------+  +----------+
                 |       |
        +--------v--+   +v------+
        |  solaris  |   | linux |
        +-----------+   +-------+
                         |     |
                 +-------v-+  +v---------+
                 | ubuntu  |  |  redhat  |
                 +---------+  +----------+
</code></pre><p>My answer does not do much, but I was tired after the ascii art ^^.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OS</span> </span>{}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Windows</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">OS</span> </span>{}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Unix</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">OS</span> </span>{}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solaris</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Unix</span> </span>{}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Linux</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Unix</span> </span>{}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ubuntu</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Linux</span> </span>{}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RedHat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Linux</span> </span>{}</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2 id="exercise-4">Exercise 4</h2>
<blockquote>
<p>Define an abstract class Item with methods price and description. A SimpleItem is an item whose price and description are specified in the constructor. Take advantage of the fact that a val can override a def. A Bundle is an item that contains other items. Its price is the sum of the prices in the bundle. Also provide a mechanism for adding items to the bundle and a suitable description method.</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Item</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">price</span></span>: <span class="hljs-type">Double</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">description</span></span>: <span class="hljs-type">String</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleItem</span>(<span class="hljs-params">override val price: <span class="hljs-type">Double</span>, override val description: <span class="hljs-type">String</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">Item</span> </span>{}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bundle</span>(<span class="hljs-params">initialItems: <span class="hljs-type">SimpleItem</span>*</span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">Item</span> </span>{
  <span class="hljs-keyword">val</span> items: collection.mutable.<span class="hljs-type">Buffer</span>[<span class="hljs-type">SimpleItem</span>] = initialItems.toBuffer

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">price</span> </span>= items.map(_.price).sum

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">description</span> </span>= items.map(_.description).mkString(<span class="hljs-string">"+"</span>)

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span></span>(item: <span class="hljs-type">SimpleItem</span>) = items.append(item)
}

<span class="hljs-keyword">val</span> b = <span class="hljs-keyword">new</span> <span class="hljs-type">Bundle</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">SimpleItem</span>(<span class="hljs-number">3.5</span>, <span class="hljs-string">"Coffee"</span>), <span class="hljs-keyword">new</span> <span class="hljs-type">SimpleItem</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"Cookie"</span>))
<span class="hljs-string">s"<span class="hljs-subst">${b.description}</span> is <span class="hljs-subst">${b.price}</span>$$"</span>  <span class="hljs-comment">//&gt; Coffee+Cookie is 5.5$</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
