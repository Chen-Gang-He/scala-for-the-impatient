<!DOCTYPE html>

<html>
<head>
  <title>Scala For The Impatient -- Chapter 2</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="index.html">
                  index
                </a>
              
                
                <a class="source" href="chapter1.html">
                  chapter1
                </a>
              
                
                <a class="source" href="chapter2.html">
                  chapter2
                </a>
              
                
                <a class="source" href="chapter3.html">
                  chapter3
                </a>
              
                
                <a class="source" href="chapter4.html">
                  chapter4
                </a>
              
                
                <a class="source" href="chapter5.html">
                  chapter5
                </a>
              
                
                <a class="source" href="chapter6.html">
                  chapter6
                </a>
              
                
                <a class="source" href="chapter7.html">
                  chapter7
                </a>
              
                
                <a class="source" href="chapter8.html">
                  chapter8
                </a>
              
                
                <a class="source" href="chapter9.html">
                  chapter9
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    
    
        <a class="home" href="index.html">⏎</a>
    

    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1 id="scala-for-the-impatient-chapter-2">Scala For The Impatient – Chapter 2</h1>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="exercise-1">Exercise 1</h2>
<blockquote>
<p>The signum of a number is 1 if the number is positive, –1 if it is negative, and 0 if it is zero. Write a function that computes this value.</p>
</blockquote>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>using <em>if/else</em>:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">signum1</span></span>(x: <span class="hljs-type">Int</span>) = <span class="hljs-keyword">if</span> (x == <span class="hljs-number">0</span>) <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span>) <span class="hljs-number">-1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">1</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>using <em>pattern matching</em>:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">signum2</span></span>(x: <span class="hljs-type">Int</span>) = x <span class="hljs-keyword">match</span> {
  <span class="hljs-keyword">case</span> <span class="hljs-number">0</span> =&gt; <span class="hljs-number">0</span>
  <span class="hljs-keyword">case</span> _ <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span>) =&gt; <span class="hljs-number">1</span>
  <span class="hljs-keyword">case</span> _ =&gt; <span class="hljs-number">-1</span>
}</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2 id="exercise-2">Exercise 2</h2>
<blockquote>
<p>What is the value of an empty block expression {}? What is its type?</p>
</blockquote>
<p>An empty block as type <code>Unit</code>.  As explained in the <a href="http://www.scala-lang.org/api/current/index.html#scala.Unit">API docs</a>:</p>
<blockquote>
<p>Unit is a subtype of scala.AnyVal. There is only one value of type Unit, (), and it is not represented by any object in the underlying runtime system. A method with return type Unit is analogous to a Java method which is declared void.</p>
</blockquote>
<p>So, <code>Unit</code> is a sort of placeholder meaning <em>no useful value</em>.</p>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2 id="exercise-3">Exercise 3</h2>
<blockquote>
<p>Come up with one situation where the assignment x = y = 1 is valid in Scala.</p>
</blockquote>
<p>Since in scala an assignment does return nothing (vs C-like languages), <code>x</code> needs to be of type Unit</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> x = {} <span class="hljs-comment">//&gt; res: x = Unit ()</span>
<span class="hljs-keyword">var</span> y = <span class="hljs-number">0</span> <span class="hljs-comment">//&gt; res: y = 0</span>
x = y = <span class="hljs-number">1</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="exercise-4">Exercise 4</h2>
<blockquote>
<p>Write a Scala equivalent for the Java loop</p>
<pre><code> <span class="hljs-keyword">for</span> (int i = <span class="hljs-number">10</span>; i &gt;= <span class="hljs-number">0</span>; i--) <span class="hljs-type">System</span>.out.println(i);
</code></pre></blockquote>

            </div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Using <code>reverse</code> (not very elegant):</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">for</span> (i &lt;- <span class="hljs-number">0</span> to <span class="hljs-number">10</span> reverse) println(i)</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Using <code>by</code> to control the increment:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">for</span> (i &lt;- <span class="hljs-number">10</span> to <span class="hljs-number">0</span> by <span class="hljs-number">-1</span>) println(i)</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h2 id="exercise-5">Exercise 5</h2>
<blockquote>
<p>Write a procedure countdown(n: Int) that prints the numbers from n to 0.</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-comment">/* Using a for loop */</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">countdown1</span></span>(x: <span class="hljs-type">Int</span>) =
  <span class="hljs-keyword">for</span> (i &lt;- x to <span class="hljs-number">0</span> by <span class="hljs-number">-1</span>) println(i)

<span class="hljs-comment">/* Using recursion */</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">countdown2</span></span>(x: <span class="hljs-type">Int</span>): <span class="hljs-type">Unit</span> = <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span>) {
  println(x)
  countdown2(x - <span class="hljs-number">1</span>)
}</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2 id="exercise-6">Exercise 6</h2>
<blockquote>
<p>Write a for loop for computing the product of the Unicode codes of all letters in a string. For example, the product of the characters in “Hello” is 825152896.</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">unicodeProduct</span></span>(s: <span class="hljs-type">String</span>) = {
  <span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>
  <span class="hljs-keyword">for</span> (c &lt;- s) i *= c.toInt
  i
}</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2 id="exercise-7-8-and-9">Exercise 7, 8 and 9</h2>
<blockquote>
<ol>
<li><p>Solve the preceding exercise without writing a loop. (Hint: Look at the StringOps Scaladoc.)</p>
</li>
<li><p>Write a function product(s : String) that computes the product, as described in the preceding exercises.</p>
</li>
<li><p>Make the function of the preceding exercise a recursive function.</p>
</li>
</ol>
</blockquote>
<p><em>Note:</em> in the functions below, we should take care of overflows. In the following, we use <code>Int</code> (that’s just an exercise), but in production we should use <code>BigInt</code>…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s</span> </span>= <span class="hljs-string">"Hello"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Using <code>foreach</code>:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">product1</span></span>(s: <span class="hljs-type">String</span>) = {
  <span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>
  s.foreach(i *= _)
  i
}
product1(s)</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Using recursion (don’t forget to specify the return type):</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">product2</span></span>(s: <span class="hljs-type">String</span>): <span class="hljs-type">Int</span> = {
  <span class="hljs-keyword">if</span> (s.length == <span class="hljs-number">0</span>) <span class="hljs-number">1</span>
  <span class="hljs-keyword">else</span> s.head * product2(s.tail)
}
product2(s)</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Using tail recursion (more effective):</p>
<div style="border:1px solid #eee; padding:5px 5px 5px 15px; font-size: .9em"><strong>Tail recursion</strong> is a special kind of recursion where the recursive call is the very last thing in the function. It’s a function that <em>does not do anything at all after recursing</em>. <br/>
This is important because it means that you can just pass the result of the recursive call through directly instead of waiting for it, so you don’t have to consume any stack space. </div>

<p>the <code>@tailrec</code> annotation checks that the function is indeed a tail recursion.</p>
<p>We could also have used one function with a default <code>acc</code> parameter set to 1, but using a private inner function ensures no one tempers with the <code>acc</code> (for example calling product(s, 0)…)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">product3</span></span>(s: <span class="hljs-type">String</span>) = {
  <span class="hljs-meta">@scala</span>.annotation.tailrec
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_product</span></span>(s: <span class="hljs-type">String</span>, acc: <span class="hljs-type">Int</span>): <span class="hljs-type">Int</span> = {
    <span class="hljs-keyword">if</span> (s.length == <span class="hljs-number">0</span>) acc
    <span class="hljs-keyword">else</span> _product(s.tail, acc * s.head)
  }

  _product(s, <span class="hljs-number">1</span>)
}
product3(s)</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Using <code>foldLeft</code>.
This is certainly the most elegant, but also the most difficult to
understand…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">product4</span></span>(s: <span class="hljs-type">String</span>) = s.foldLeft(<span class="hljs-number">1</span>)(_ * _)
product4(s)</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <h2 id="exercise-9">Exercise 9</h2>
<blockquote>
<p>Write a function that computes x , where n is an integer. Use the following recursive definition (omitted).</p>
</blockquote>

            </div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Using if/else:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">power1</span></span>(x: <span class="hljs-type">Double</span>, n: <span class="hljs-type">Int</span>): <span class="hljs-type">Double</span> =
  <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-number">1</span>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">0</span>) <span class="hljs-number">1</span> / power1(x, -n)
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> &amp;&amp; n &gt; <span class="hljs-number">2</span>) power1(power1(x, n / <span class="hljs-number">2</span>), <span class="hljs-number">2</span>)
  <span class="hljs-keyword">else</span> x * power1(x, n - <span class="hljs-number">1</span>)

power1(<span class="hljs-number">2</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">//&gt; 1024.0</span>
power1(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>)   <span class="hljs-comment">//&gt; 2.0</span>
power1(<span class="hljs-number">2</span>, <span class="hljs-number">13</span>)  <span class="hljs-comment">//&gt; 8192.0</span>
power1(<span class="hljs-number">2</span>, <span class="hljs-number">-4</span>)  <span class="hljs-comment">// 0.0625</span></pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Using <em>pattern matching</em>:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">power2</span></span>(x: <span class="hljs-type">Double</span>, n: <span class="hljs-type">Int</span>): <span class="hljs-type">Double</span> = n <span class="hljs-keyword">match</span> {
  <span class="hljs-keyword">case</span> <span class="hljs-number">0</span> =&gt; <span class="hljs-number">1</span>
  <span class="hljs-keyword">case</span> n <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">0</span>) =&gt; <span class="hljs-number">1</span> / power2(x, -n)
  <span class="hljs-keyword">case</span> n <span class="hljs-keyword">if</span> (n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> &amp;&amp; n &gt; <span class="hljs-number">2</span>) =&gt; power2(power2(x, n / <span class="hljs-number">2</span>), <span class="hljs-number">2</span>)
  <span class="hljs-keyword">case</span> _ =&gt; x.toDouble * power2(x, n - <span class="hljs-number">1</span>)
}

power2(<span class="hljs-number">2</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">//&gt; 1024.0</span>
power2(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>)   <span class="hljs-comment">//&gt; 2.0</span>
power2(<span class="hljs-number">2</span>, <span class="hljs-number">13</span>)  <span class="hljs-comment">//&gt; 8192.0</span>
power2(<span class="hljs-number">2</span>, <span class="hljs-number">-4</span>)  <span class="hljs-comment">//&gt; 0.0625</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
