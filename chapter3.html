<!DOCTYPE html>

<html>
<head>
  <title>Scala For The Impatient -- Chapter 3</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="index.html">
                  index
                </a>
              
                
                <a class="source" href="chapter1.html">
                  chapter1
                </a>
              
                
                <a class="source" href="chapter2.html">
                  chapter2
                </a>
              
                
                <a class="source" href="chapter3.html">
                  chapter3
                </a>
              
                
                <a class="source" href="chapter4.html">
                  chapter4
                </a>
              
                
                <a class="source" href="chapter5.html">
                  chapter5
                </a>
              
                
                <a class="source" href="chapter6.html">
                  chapter6
                </a>
              
                
                <a class="source" href="chapter7.html">
                  chapter7
                </a>
              
                
                <a class="source" href="chapter8.html">
                  chapter8
                </a>
              
                
                <a class="source" href="chapter9.html">
                  chapter9
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    
    
        <a class="home" href="index.html">⏎</a>
    

    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="scala-for-the-impatient-chapter-3">Scala For The Impatient – Chapter 3</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="exercise-1">Exercise 1</h2>
<blockquote>
<p>Write a code snippet that sets a to an array of n random integers between 0 (inclusive) and n (exclusive).</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">randomArray</span></span>(length: <span class="hljs-type">Int</span>, min: <span class="hljs-type">Int</span>, max: <span class="hljs-type">Int</span>) = {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Importing <code>Random</code> is not necessary, but shows how we can import something only in a block.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">import</span> scala.util.{<span class="hljs-type">Random</span> =&gt; <span class="hljs-type">R</span>}</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>In case <code>min &gt; max</code>, we cannot return an Int… So we use the useful <code>sys.error</code> to throw a <code>RuntimeException</code> with a meaningful message.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (min &gt;= max) sys.error(<span class="hljs-string">"min should be &lt; max"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p><code>yield</code> will gather all the results <code>yielded</code> inside the loop into a collection. Very useful !
Also, we can wrap the for statement into parentheses so that we can convert the result (a <code>Vector</code> by default) to an array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  (<span class="hljs-keyword">for</span> (_ &lt;- <span class="hljs-number">0</span> until length)
    <span class="hljs-keyword">yield</span> min + (<span class="hljs-type">R</span>.nextDouble() * (max - min)).toInt
    ).toArray
}

randomArray(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>) <span class="hljs-comment">//&gt; Array(11, 15, 14, 19, 15, 14, 19, 14, 16, 17)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2 id="exercise-2">Exercise 2</h2>
<blockquote>
<p>Write a loop that swaps adjacent elements of an array of integers. For example, Array(1, 2, 3, 4, 5) becomes Array(2, 1, 4, 3, 5).</p>
</blockquote>
<p>Here, ensure you use <code>Array</code> and not <code>List</code>, as a list in scala is immutable.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">swap</span></span>[<span class="hljs-type">T</span>](array: <span class="hljs-type">Array</span>[<span class="hljs-type">T</span>]) = {
  <span class="hljs-keyword">for</span> (i &lt;- <span class="hljs-number">0</span> until array.length - <span class="hljs-number">1</span> by <span class="hljs-number">2</span>) {
    <span class="hljs-keyword">val</span> temp = array(i)
    array(i) = array(i + <span class="hljs-number">1</span>)
    array(i + <span class="hljs-number">1</span>) = temp
  }
  array
}</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>The swap is done in-place</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> l1 = (<span class="hljs-number">0</span> to <span class="hljs-number">10</span>).toArray
swap(l1) <span class="hljs-comment">//&gt; Array(1, 0, 3, 2, 5, 4, 7, 6, 9, 8, 10)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>but since the last statement of the <code>swap</code> method is <code>array</code>, the array is also returned, making the following work as well:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>l1 = swap((<span class="hljs-number">0</span> to <span class="hljs-number">10</span>).toArray) <span class="hljs-comment">//&gt; Array(1, 0, 3, 2, 5, 4, 7, 6, 9, 8, 10)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="exercise-3">Exercise 3</h2>
<blockquote>
<p>Repeat the preceding assignment, but produce a new array with the swapped values. Use for/yield.</p>
</blockquote>
<p>There are many possibilities. Here, I have two for loops, the second one permits me to traverse elements i-1 and i. Also, since we create a new object, an immutable list seems more appropriate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">swapList</span></span>[<span class="hljs-type">T</span>](list: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>]) = {
  (<span class="hljs-keyword">for</span> (i &lt;- <span class="hljs-number">1</span> until list.length + <span class="hljs-number">1</span> by <span class="hljs-number">2</span>;
        j &lt;- (i - <span class="hljs-number">1</span> to i reverse) <span class="hljs-keyword">if</span> j &lt; list.length)
    <span class="hljs-keyword">yield</span> j
    ).toList
}

swapList(<span class="hljs-number">0</span> to <span class="hljs-number">10</span> toList) <span class="hljs-comment">//&gt; List(1, 0, 3, 2, 5, 4, 7, 6, 9, 8, 10)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2 id="exercise-4">Exercise 4</h2>
<blockquote>
<p>Given an array of integers, produce a new array that contains all positive values of the original array, in their original order, followed by all values that are zero or negative, in their original order.</p>
</blockquote>

            </div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Using <em>filter</em>:</p>
<p>(the <code>++</code> operator concatenates lists)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">positiveFirst1</span></span>(list: <span class="hljs-type">List</span>[<span class="hljs-type">Int</span>]) = {
  <span class="hljs-keyword">val</span> pos = list.filter((_: <span class="hljs-type">Int</span>) &gt; <span class="hljs-number">0</span>)
  <span class="hljs-keyword">val</span> neg = list.filterNot((_: <span class="hljs-type">Int</span>) &gt; <span class="hljs-number">0</span>)
  pos ++ neg
}</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Using <em>for</em> and <em>yield</em>:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">positiveFirst2</span></span>(list: <span class="hljs-type">List</span>[<span class="hljs-type">Int</span>]) =
  (<span class="hljs-keyword">for</span> (elt &lt;- list <span class="hljs-keyword">if</span> elt &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">yield</span> elt) ++ (<span class="hljs-keyword">for</span>(elt &lt;- list <span class="hljs-keyword">if</span> elt &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">yield</span> elt)</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Testing the two codes:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">val</span> randomL = <span class="hljs-type">List</span>(<span class="hljs-number">3</span>, <span class="hljs-number">-5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">-4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">-10</span>, <span class="hljs-number">-9</span>, <span class="hljs-number">0</span>, <span class="hljs-number">9</span>, <span class="hljs-number">-10</span>)
positiveFirst1(randomL) <span class="hljs-comment">//&gt; List(3, 7, 2, 9, -5, -4, -10, -9, 0, -10)</span>
positiveFirst2(randomL) <span class="hljs-comment">//&gt; List(3, 7, 2, 9, -5, -4, -10, -9, 0, -10)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h2 id="exercise-5">Exercise 5</h2>
<blockquote>
<p>How do you compute the average of an Array[Double]?</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">avg</span></span>(list: <span class="hljs-type">List</span>[<span class="hljs-type">Double</span>]) = {
  list.sum / list.length
}</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Testing:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>avg({
  <span class="hljs-keyword">for</span> (i &lt;- <span class="hljs-number">0</span> to <span class="hljs-number">10</span>) <span class="hljs-keyword">yield</span> scala.util.<span class="hljs-type">Random</span>.nextDouble()
}.toList)</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h2 id="exercise-6">Exercise 6</h2>
<blockquote>
<p>How do you rearrange the elements of an Array[Int] so that they appear in
reverse sorted order?</p>
</blockquote>

            </div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <ol>
<li>sort, then reverse:</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseSort1</span></span>(array : <span class="hljs-type">Array</span>[<span class="hljs-type">Int</span>]) = array.sorted.reverse</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <ol>
<li>use <code>sortWith</code>, the lambda should return true if a comes before b, false otherwise:</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseSort2</span></span>(array : <span class="hljs-type">Array</span>[<span class="hljs-type">Int</span>]) = array.sortWith(_ &gt; _)</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <ol>
<li>use <code>sortBy</code>, using the unary <code>-</code> to reverse the order:</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverseSort3</span></span>(array : <span class="hljs-type">Array</span>[<span class="hljs-type">Int</span>]) = array.sortBy(-_)

<span class="hljs-keyword">var</span> array = (<span class="hljs-number">0</span> to <span class="hljs-number">10</span>).toArray
reverseSort1(array)
reverseSort2(array)
reverseSort3(array)</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <blockquote>
<p>How do you do the same with an ArrayBuffer[Int]?
To use an <code>ArrayBuffer</code>, we only need to change the method’s signature.</p>
</blockquote>
<p>This is because the sort methods are implemented in <code>scala.collection.SeqLike</code>, which both <code>Array</code> and <code>ArrayBuffer</code> implement.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> scala.collection.mutable.<span class="hljs-type">ArrayBuffer</span>
(<span class="hljs-number">0</span> to <span class="hljs-number">10</span>).toBuffer.asInstanceOf[<span class="hljs-type">ArrayBuffer</span>[<span class="hljs-type">Int</span>]].sortBy(-_)</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <h2 id="exercise-7">Exercise 7</h2>
<blockquote>
<p>Write a code snippet that produces all values from an array with duplicates removed. (Hint: Look at Scaladoc.)
Use the <code>distinct</code> method of <code>scala.collection.SeqLike</code>.</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> dupl = (<span class="hljs-number">0</span> to <span class="hljs-number">10</span>) ++ (<span class="hljs-number">1</span> to <span class="hljs-number">11</span>)
dupl.distinct</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <h2 id="exercise-8">Exercise 8</h2>
<blockquote>
<p>Rewrite the example at the end of Section 3.4, “Transforming Arrays,” on page 34 using the drop method for dropping the index of the first match. Look the method up in Scaladoc.
<code>drop</code> drops the n first elements of a sequence.</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dropNegButFirst</span></span>(array: <span class="hljs-type">Array</span>[<span class="hljs-type">Int</span>]) = {
  <span class="hljs-keyword">var</span> idx = <span class="hljs-keyword">for</span> (i &lt;- array.indices <span class="hljs-keyword">if</span> array(i) &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">yield</span> i
  <span class="hljs-keyword">if</span> (idx.length == <span class="hljs-number">0</span>)
    array
  <span class="hljs-keyword">else</span> {
    idx = idx.drop(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">var</span> buff = array.toBuffer
    <span class="hljs-keyword">for</span> (i &lt;- idx.reverse) buff.remove(i)
    buff.toArray
  }
}

dropNegButFirst((<span class="hljs-number">1</span> :: <span class="hljs-number">2</span> :: (<span class="hljs-number">-3</span>) :: (<span class="hljs-number">-2</span>) :: <span class="hljs-number">0</span> :: <span class="hljs-type">Nil</span>).toArray)</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h2 id="exercise-9">Exercise 9</h2>
<blockquote>
<p>Make a collection of all time zones returned by java.util.TimeZone.getAvailableIDs that are in America. Strip off the “America/“ prefix and sort the result.</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">americanTz</span> </span>= {
  <span class="hljs-keyword">for</span> (tz &lt;- java.util.<span class="hljs-type">TimeZone</span>.getAvailableIDs
       <span class="hljs-keyword">if</span> tz.startsWith(<span class="hljs-string">"America"</span>))
    <span class="hljs-keyword">yield</span> tz.replace(<span class="hljs-string">"America/"</span>, <span class="hljs-string">""</span>)
}
americanTz</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <h2 id="exercise-10">Exercise 10</h2>
<blockquote>
<p>Import java.awt.datatransfer._ and make an object of type SystemFlavorMap with the call</p>
</blockquote>
<p>   val flavors = SystemFlavorMap.getDefaultFlavorMap().asInstanceOf[SystemFlavorMap]</p>
<p>Then call the getNativesForFlavor method with parameter DataFlavor.imageFlavor and get the return value as a Scala buffer. (Why this obscure class? It’s hard to find uses of java.util.List in the standard Java library.)</p>

            </div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>The <code>getNativesForFlavor</code> returns a <code>java.util.List</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> java.awt.datatransfer._

<span class="hljs-keyword">val</span> flavors = <span class="hljs-type">SystemFlavorMap</span>.getDefaultFlavorMap().asInstanceOf[<span class="hljs-type">SystemFlavorMap</span>]

<span class="hljs-keyword">var</span> javaList = flavors.getNativesForFlavor(<span class="hljs-type">DataFlavor</span>.imageFlavor) <span class="hljs-comment">// java.util.List[String] = [PNG, JFIF, TIFF]</span></pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>We can use the <code>toArray</code> and <code>toBuffer</code> methods, which seem to work:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>javaList.toArray.toBuffer <span class="hljs-comment">// scala.collection.mutable.Buffer[Object] = ArrayBuffer(PNG, JFIF, TIFF)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>We can also use the (now <em>deprecated</em>) <code>JavaConversions</code> util:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>collection.<span class="hljs-type">JavaConversions</span>.asScalaBuffer(javaList) <span class="hljs-comment">// scala.collection.mutable.Buffer[String] = Buffer(PNG, JFIF, TIFF)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>The scala 2.12 way would be:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>scala.collection.<span class="hljs-type">JavaConverters</span>.asScalaBuffer(javaList) <span class="hljs-comment">// scala.collection.mutable.Buffer[String] = Buffer(PNG, JFIF, TIFF)</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
