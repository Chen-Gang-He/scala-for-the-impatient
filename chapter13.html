<!DOCTYPE html>

<html>
<head>
  <title>Scala For The Impatient -- Chapter 12</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="index.html">
                  index
                </a>
              
                
                <a class="source" href="chapter01.html">
                  chapter01
                </a>
              
                
                <a class="source" href="chapter02.html">
                  chapter02
                </a>
              
                
                <a class="source" href="chapter03.html">
                  chapter03
                </a>
              
                
                <a class="source" href="chapter04.html">
                  chapter04
                </a>
              
                
                <a class="source" href="chapter05.html">
                  chapter05
                </a>
              
                
                <a class="source" href="chapter06.html">
                  chapter06
                </a>
              
                
                <a class="source" href="chapter07.html">
                  chapter07
                </a>
              
                
                <a class="source" href="chapter08.html">
                  chapter08
                </a>
              
                
                <a class="source" href="chapter09.html">
                  chapter09
                </a>
              
                
                <a class="source" href="chapter10.html">
                  chapter10
                </a>
              
                
                <a class="source" href="chapter12.html">
                  chapter12
                </a>
              
                
                <a class="source" href="chapter13.html">
                  chapter13
                </a>
              
                
                <a class="source" href="chapter14.html">
                  chapter14
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    
    
        <a class="home" href="index.html">⏎</a>
    

    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="scala-for-the-impatient-chapter-12">Scala For The Impatient – Chapter 12</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="exercise-1">Exercise 1</h2>
<blockquote>
<p>Write a function that, given a string, produces a map of the indexes of all characters. For example, indexes(“Mississippi”)` should return a map associating ‘M’ with the set {0}, ‘i’ with the set {1, 4, 7, 10}, and so on. Use a mutable map of characters to mutable sets. How can you ensure that the set is sorted?</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">indexes</span></span>(s: <span class="hljs-type">String</span>) = {
  <span class="hljs-keyword">import</span> scala.collection.mutable
  <span class="hljs-keyword">var</span> map = mutable.<span class="hljs-type">SortedMap</span>[<span class="hljs-type">Char</span>, mutable.<span class="hljs-type">Set</span>[<span class="hljs-type">Int</span>]]()

  <span class="hljs-keyword">for</span> (c &lt;- s.zipWithIndex)
    map.getOrElseUpdate(c._1, mutable.<span class="hljs-type">SortedSet</span>[<span class="hljs-type">Int</span>]()) += c._2
  map
}</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>yields:</p>
<pre><code><span class="hljs-type">M</span> -&gt; <span class="hljs-type">TreeSet</span>(<span class="hljs-number">0</span>)
i -&gt; <span class="hljs-type">TreeSet</span>(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>)
p -&gt; <span class="hljs-type">TreeSet</span>(<span class="hljs-number">8</span>, <span class="hljs-number">9</span>)
s -&gt; <span class="hljs-type">TreeSet</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>indexes(<span class="hljs-string">"Mississippi"</span>).mkString(<span class="hljs-string">"\n"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2 id="exercise-2">Exercise 2</h2>
<blockquote>
<p>Repeat the preceding exercise, using an immutable map of characters to lists</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">indexes2</span></span>(s: <span class="hljs-type">String</span>) = {
  s.zipWithIndex.foldLeft {<span class="hljs-type">Map</span>.empty[<span class="hljs-type">Char</span>, <span class="hljs-type">Set</span>[<span class="hljs-type">Int</span>]]} {
    <span class="hljs-keyword">case</span> (acc, c) =&gt; acc + ((c._1, acc.get(c._1) <span class="hljs-keyword">match</span> {
      <span class="hljs-keyword">case</span> <span class="hljs-type">Some</span>(x) =&gt; x + c._2
      <span class="hljs-keyword">case</span> _ =&gt; <span class="hljs-type">Set</span>(c._2)
    }))
  }
}

indexes2(<span class="hljs-string">"Mississippi"</span>).mkString(<span class="hljs-string">"\n"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="exercise-3">Exercise 3</h2>
<blockquote>
<p> Write a function that removes all zeroes from a linked list of integers.</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">noZeroes</span></span>(ls: scala.collection.mutable.<span class="hljs-type">LinkedList</span>[<span class="hljs-type">Int</span>]) = ???</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2 id="exercise-4">Exercise 4</h2>
<blockquote>
<p>Write a function that receives a collection of strings and a map from strings to integers. Return a collection of integers that are values of the map corresponding to one of the strings in the collection. For example, given Array(“Tom”, “Fred”, “Harry”) and Map(“Tom” -&gt; 3, “Dick” -&gt; 4, “Harry” -&gt; 5),  return Array(3, 5)</p>
</blockquote>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p><code>flatMap</code> =&gt; get rid of <code>Option</code> and keeps only the <code>Some</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">exo4_v1</span></span>(ss: <span class="hljs-type">Seq</span>[<span class="hljs-type">String</span>], map: <span class="hljs-type">Map</span>[<span class="hljs-type">String</span>, <span class="hljs-type">Int</span>]) =
  ss.flatMap(map.get).toList

exo4_v1(<span class="hljs-type">Array</span>(<span class="hljs-string">"Tom"</span>, <span class="hljs-string">"Fred"</span>, <span class="hljs-string">"Harry"</span>), <span class="hljs-type">Map</span>(<span class="hljs-string">"Tom"</span> -&gt; <span class="hljs-number">3</span>, <span class="hljs-string">"Dick"</span> -&gt; <span class="hljs-number">4</span>, <span class="hljs-string">"Harry"</span> -&gt; <span class="hljs-number">5</span>))

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">exo4_v2</span></span>(ss: <span class="hljs-type">Seq</span>[<span class="hljs-type">String</span>], map: <span class="hljs-type">Map</span>[<span class="hljs-type">String</span>, <span class="hljs-type">Int</span>]) =
  ss.map(map.get).collect { <span class="hljs-keyword">case</span> <span class="hljs-type">Some</span>(x) =&gt; x }.toList

exo4_v2(<span class="hljs-type">Array</span>(<span class="hljs-string">"Tom"</span>, <span class="hljs-string">"Fred"</span>, <span class="hljs-string">"Harry"</span>), <span class="hljs-type">Map</span>(<span class="hljs-string">"Tom"</span> -&gt; <span class="hljs-number">3</span>, <span class="hljs-string">"Dick"</span> -&gt; <span class="hljs-number">4</span>, <span class="hljs-string">"Harry"</span> -&gt; <span class="hljs-number">5</span>))

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">exo4_v3</span></span>(ss: <span class="hljs-type">Seq</span>[<span class="hljs-type">String</span>], map: <span class="hljs-type">Map</span>[<span class="hljs-type">String</span>, <span class="hljs-type">Int</span>]) =
  ss.map(map.get).flatten.toList

exo4_v3(<span class="hljs-type">Array</span>(<span class="hljs-string">"Tom"</span>, <span class="hljs-string">"Fred"</span>, <span class="hljs-string">"Harry"</span>), <span class="hljs-type">Map</span>(<span class="hljs-string">"Tom"</span> -&gt; <span class="hljs-number">3</span>, <span class="hljs-string">"Dick"</span> -&gt; <span class="hljs-number">4</span>, <span class="hljs-string">"Harry"</span> -&gt; <span class="hljs-number">5</span>))</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="exercise-5">Exercise 5</h2>
<blockquote>
<p>Implement a function that works just like mkString, using reduceLeft.</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">myMkString</span></span>[<span class="hljs-type">A</span>](ls: <span class="hljs-type">Seq</span>[<span class="hljs-type">A</span>], sep: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>): <span class="hljs-type">String</span> =
  ls.
    map(_.toString). <span class="hljs-comment">// mandatory: reduce -&gt; type in == type out</span>
    reduceLeft { (acc, in) =&gt; acc + sep + in }

<span class="hljs-keyword">val</span> fruits = <span class="hljs-type">List</span>(<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"ananas"</span>)
myMkString(fruits) <span class="hljs-comment">//&gt; applebananaananas</span>
myMkString(fruits, <span class="hljs-string">", "</span>) <span class="hljs-comment">//&gt; apple, banana, ananas</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="exercise-6">Exercise 6</h2>
<blockquote>
<p>Given a list of integers lst, what is</p>
<pre><code>(lst :\ <span class="hljs-type">List</span>[<span class="hljs-type">Int</span>]())(_ :: _)
(<span class="hljs-type">List</span>[<span class="hljs-type">Int</span>]() /: lst)(_ :+ _)
</code></pre><p>? How can you modify one of them to reverse the list?</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">val</span> lst = (<span class="hljs-number">1</span> to <span class="hljs-number">10</span>).toList</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>from the right, we add elements to a new list. So basically,
it duplicates the elements of the list.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>(lst :\ <span class="hljs-type">List</span>[<span class="hljs-type">Int</span>]()) (_ :: _) <span class="hljs-comment">// ==&gt;</span>

lst.foldRight(<span class="hljs-type">List</span>.empty[<span class="hljs-type">Int</span>]) {
  (i, acc) =&gt; acc.+:(i) <span class="hljs-comment">// or i +: acc or i :: acc. :: or +: = append to a list</span>
}</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>using foldLeft,  we begin at the first element and add new elements to the tail of the list, so we also duplicate it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-type">List</span>[<span class="hljs-type">Int</span>]() /: lst) (_ :+ _) <span class="hljs-comment">// ==&gt;</span>

lst.foldLeft(<span class="hljs-type">List</span>.empty[<span class="hljs-type">Int</span>]) {
  (acc, i) =&gt; acc ++ <span class="hljs-type">List</span>(i) <span class="hljs-comment">// :+ = prepend, i.e. add to the beginning, same as ++ List()</span>
}</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2 id="exercise-7">Exercise 7</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>
(<span class="hljs-number">1</span> to <span class="hljs-number">4</span>).zip(<span class="hljs-number">4</span> to <span class="hljs-number">8</span>) map {<span class="hljs-type">Function</span>.tupled(_ * _)} <span class="hljs-comment">//&gt; Vector(4, 10, 18, 28)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2 id="exercise-8">Exercise 8</h2>
<blockquote>
<p>Write a function that turns an array of Double values into a two-dimensional array. Pass the number of columns as a parameter. For example, with Array(1, 2, 3, 4, 5, 6) and three columns, return Array(Array(1, 2, 3), Array(4, 5, 6)). Use the grouped method.</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">toMultiDim</span></span>[<span class="hljs-type">T</span>](arr: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>], col: <span class="hljs-type">Int</span>): <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-type">T</span>]] = arr.grouped(col).toList

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">toMultiDim_v2</span></span>[<span class="hljs-type">T</span>](lst: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>], col: <span class="hljs-type">Int</span>): <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-type">T</span>]] = {
  <span class="hljs-keyword">for</span> (i &lt;- lst.indices by col) <span class="hljs-keyword">yield</span> lst.slice(i, i + col)
}.toList

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">toMultiDim_v3</span></span>[<span class="hljs-type">T</span>](lst: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>], col: <span class="hljs-type">Int</span>): <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-type">T</span>]] = {
  lst.foldRight(<span class="hljs-type">List</span>(<span class="hljs-type">List</span>.empty[<span class="hljs-type">T</span>])) {
    (i, acc) =&gt;
      acc.head <span class="hljs-keyword">match</span> {
        <span class="hljs-keyword">case</span> l<span class="hljs-meta">@List</span>(_*) <span class="hljs-keyword">if</span> l.length &lt; <span class="hljs-number">3</span> =&gt; (i :: l) :: acc.tail
        <span class="hljs-keyword">case</span> _ =&gt; <span class="hljs-type">List</span>(i) :: acc
      }
  }
}

<span class="hljs-keyword">val</span> arr = <span class="hljs-type">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)
toMultiDim(arr, <span class="hljs-number">3</span>)
toMultiDim_v2(arr, <span class="hljs-number">3</span>)
toMultiDim_v3(arr, <span class="hljs-number">3</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h2 id="exercises-9-and-10">Exercises  9 and 10</h2>
<p>TODO</p>

            </div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
